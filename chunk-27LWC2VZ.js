import{c as J,e as K,f as Q,h as M}from"./chunk-YKYP4O2R.js";import{A as lt,C as Et,D as Ft,E as pt,F as Dt,G as ct,H as wt,L as Nt,a as Z,b as k,c as tt,d as et,e as it,f as St,g as Ct,h as nt,i as ot,j as It,k as _t,l as Tt,n as rt,o as at,p as st,z as xt}from"./chunk-OOD42SEU.js";import{k as z,l as x,m as v,n as E,o as F,q as b}from"./chunk-W2YDVLRZ.js";import{$ as dt,$a as I,Da as s,Ea as p,Sa as d,Ua as l,Va as H,W as yt,Za as o,_a as n,a as L,ab as w,b as $,bb as N,cb as W,e as D,ea as h,fb as A,gb as R,hb as U,lb as r,mb as _,na as Y,nb as f,oa as G,ob as vt,pb as X,qb as y,rb as q,sb as C,tb as T,ub as bt,x as O,y as ht}from"./chunk-TB2EXWOT.js";var S=(()=>{class e{constructor(t,i){this.firestore=t,this.datePipe=i}getAllRecords(t,i){let a=pt(this.firestore,t);return Et(a,{idField:i})}deleteRecord(t,i){let a=ct(this.firestore,`${t}/${i}`);return Dt(a)}updateRecord(t,i,a){return D(this,null,function*(){let m=ct(this.firestore,`${t}/${i}`);yield Nt(m,a)})}addRecord(t,i){return D(this,null,function*(){let a=pt(this.firestore,t);yield Ft(a,i)})}getRecordById(t,i){return D(this,null,function*(){let a=ct(this.firestore,`${t}/${i}`);return yield wt(a)})}formatDate(t){return t instanceof xt?this.datePipe.transform(t.toDate(),"YYYY/MM/dd"):t instanceof Date?this.datePipe.transform(t,"YYYY/MM/dd"):null}static{this.\u0275fac=function(i){return new(i||e)(dt(lt),dt(F))}}static{this.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var jt=e=>({"is-invalid":e});function Pt(e,c){e&1&&(o(0,"div",8),r(1," Category name is required. "),n())}function qt(e,c){e&1&&(o(0,"div",8),r(1," Minimum 2 characters required. "),n())}var ut=(()=>{class e{constructor(t,i,a,m){this.fb=t,this.router=i,this.transactionService=a,this.activatedRoute=m,this.recordId=null,this.collectionCategory="Category"}ngOnInit(){this.recordId=this.activatedRoute.snapshot.paramMap.get("id"),this.formInit(),this.recordId&&this.loadRecord(this.recordId)}loadRecord(t){return D(this,null,function*(){let i=yield this.transactionService.getRecordById(this.collectionCategory,t);i.exists()&&this.categoryForm.patchValue(i.data())})}formInit(){this.categoryForm=this.fb.group({name:this.fb.control("",{nonNullable:!0,validators:[k.required,k.minLength(2)]}),description:this.fb.control("",{nonNullable:!0})})}get f(){return this.categoryForm.controls}onSubmit(){if(console.log("Category form submitted"),this.categoryForm.valid){let t=this.categoryForm.getRawValue();this.recordId?this.transactionService.updateRecord(this.collectionCategory,this.recordId,t):this.transactionService.addRecord(this.collectionCategory,t),this.router.navigate(["/expense-manager/category-list"]),this.categoryForm.reset(),this.categoryForm.markAsPristine()}else this.categoryForm.markAllAsTouched()}static{this.\u0275fac=function(i){return new(i||e)(p(rt),p(K),p(S),p(J))}}static{this.\u0275cmp=h({type:e,selectors:[["app-add-category"]],standalone:!0,features:[y],decls:13,vars:7,consts:[[1,"p-3","border","rounded","bg-light","shadow-sm",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name","placeholder","Enter category name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","rows","2","formControlName","description","placeholder","Enter description",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"invalid-feedback"]],template:function(i,a){i&1&&(o(0,"form",0),A("ngSubmit",function(){return a.onSubmit()}),o(1,"div",1)(2,"label",2),r(3,"Category Name"),n(),I(4,"input",3),d(5,Pt,2,0,"div",4)(6,qt,2,0,"div",4),n(),o(7,"div",1)(8,"label",5),r(9,"Description (optional)"),n(),I(10,"textarea",6),n(),o(11,"button",7),r(12," Add/Update Category "),n()()),i&2&&(l("formGroup",a.categoryForm),s(4),l("ngClass",q(5,jt,a.f.name.touched&&a.f.name.invalid)),s(),l("ngIf",a.f.name.errors==null?null:a.f.name.errors.required),s(),l("ngIf",a.f.name.errors==null?null:a.f.name.errors.minlength),s(5),l("disabled",a.categoryForm.invalid))},dependencies:[b,z,v,at,it,Z,tt,et,st,nt,ot,M]})}}return e})();var At=e=>({"is-invalid":e});function Bt(e,c){e&1&&(o(0,"div",17),r(1," Cause is required. "),n())}function Yt(e,c){e&1&&(o(0,"div",17),r(1," Minimum 3 characters required. "),n())}function Gt(e,c){e&1&&(o(0,"div",17),r(1," Amount is required. "),n())}function Ht(e,c){e&1&&(o(0,"div",17),r(1," Must be greater than 0. "),n())}function Wt(e,c){if(e&1&&(o(0,"option",21),r(1),n()),e&2){let t=c.$implicit;l("value",t.categoryId),s(),f(" ",t.name," ")}}function Ut(e,c){if(e&1&&(o(0,"select",18)(1,"option",19),r(2,"Select Category"),n(),d(3,Wt,2,2,"option",20),n()),e&2){let t=c.ngIf;s(3),l("ngForOf",t)}}function Xt(e,c){e&1&&(o(0,"div",17),r(1," Category is required. "),n())}var gt=(()=>{class e{constructor(t,i,a,m,g){this.activatedRoute=t,this.router=i,this.fb=a,this.firestore=m,this.transactionService=g,this.transactionId=null,this.collectionTransaction="TransactionLog",this.subscriptions=[]}ngOnInit(){this.transactionId=this.activatedRoute.snapshot.paramMap.get("id"),this.formInit(),this.categories$=this.transactionService.getAllRecords("Category","categoryId"),this.transactionId&&this.loadTransaction(this.transactionId)}loadTransaction(t){return D(this,null,function*(){let i=yield this.transactionService.getRecordById(this.collectionTransaction,t);i.exists()&&this.transactionForm.patchValue(i.data())})}formInit(){this.transactionForm=this.fb.group({cause:this.fb.control("",{nonNullable:!0,validators:[k.required]}),amount:this.fb.control(0,{nonNullable:!0,validators:[k.required]}),categoryId:this.fb.control("",{nonNullable:!0,validators:[k.required]}),transactionType:this.fb.control(!1,{nonNullable:!0})})}onSubmit(){if(console.log("Transaction form submitted"),this.transactionForm.valid){let t=this.transactionForm.getRawValue();this.subscriptions.push(this.categories$.subscribe(i=>{let a=i.find(g=>g.categoryId===t.categoryId),m=$(L({},t),{categoryName:a?a.name:"",date:new Date});this.transactionId?this.transactionService.updateRecord(this.collectionTransaction,this.transactionId,m):this.transactionService.addRecord(this.collectionTransaction,m),this.router.navigate(["/expense-manager/transaction-list"]),this.transactionForm.reset(),this.transactionForm.markAsPristine()}))}else this.transactionForm.markAllAsTouched()}get form(){return this.transactionForm.controls}ngOnDestroy(){this.subscriptions.length>0&&this.subscriptions.forEach(t=>t.unsubscribe())}static{this.\u0275fac=function(i){return new(i||e)(p(J),p(K),p(rt),p(lt),p(S))}}static{this.\u0275cmp=h({type:e,selectors:[["app-add-transaction"]],standalone:!0,features:[y],decls:30,vars:18,consts:[[1,"p-3","border","rounded","shadow-sm","bg-light",3,"ngSubmit","formGroup"],[1,"mb-3","d-flex"],[1,"form-check","me-3"],["type","radio","formControlName","transactionType","name","transactionType","id","transactionType1",1,"form-check-input",3,"value"],["for","transactionType1",1,"form-check-label"],[1,"form-check"],["type","radio","formControlName","transactionType","name","transactionType","id","transactionType2","checked","",1,"form-check-input",3,"value"],["for","transactionType2",1,"form-check-label"],[1,"mb-3"],["for","cause",1,"form-label"],["id","cause","type","text","formControlName","cause","placeholder","Enter Transaction Details",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","amount",1,"form-label"],["id","amount","type","number","formControlName","amount","placeholder","Enter amount",1,"form-control",3,"ngClass"],["for","categoryId",1,"form-label"],["id","categoryId","class","form-select","formControlName","categoryId",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],["id","categoryId","formControlName","categoryId",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,a){i&1&&(o(0,"form",0),A("ngSubmit",function(){return a.onSubmit()}),o(1,"div",1)(2,"div",2),I(3,"input",3),o(4,"label",4),r(5," Credit "),n()(),o(6,"div",5),I(7,"input",6),o(8,"label",7),r(9," Debit "),n()()(),o(10,"div",8)(11,"label",9),r(12,"Transaction Details"),n(),I(13,"input",10),d(14,Bt,2,0,"div",11)(15,Yt,2,0,"div",11),n(),o(16,"div",8)(17,"label",12),r(18,"Amount"),n(),I(19,"input",13),d(20,Gt,2,0,"div",11)(21,Ht,2,0,"div",11),n(),o(22,"div",8)(23,"label",14),r(24,"Category"),n(),d(25,Ut,4,1,"select",15),C(26,"async"),d(27,Xt,2,0,"div",11),n(),o(28,"button",16),r(29," Submit "),n()()),i&2&&(l("formGroup",a.transactionForm),s(3),l("value",!0),s(4),l("value",!1),s(6),l("ngClass",q(14,At,a.form.cause.touched&&a.form.cause.invalid)),s(),l("ngIf",a.form.cause.errors==null?null:a.form.cause.errors.required),s(),l("ngIf",a.form.cause.errors==null?null:a.form.cause.errors.minlength),s(4),l("ngClass",q(16,At,a.form.amount.touched&&a.form.amount.invalid)),s(),l("ngIf",a.form.amount.errors==null?null:a.form.amount.errors.required),s(),l("ngIf",a.form.amount.errors==null?null:a.form.amount.errors.min),s(4),l("ngIf",T(26,12,a.categories$)),s(2),l("ngIf",a.form.categoryId.errors==null?null:a.form.categoryId.errors.required),s(),l("disabled",a.transactionForm.invalid))},dependencies:[b,z,x,v,E,at,it,_t,Tt,Z,St,It,Ct,tt,et,st,nt,ot,M]})}}return e})();function zt(e,c){if(e&1&&(o(0,"tr")(1,"td"),r(2),n(),o(3,"td"),r(4),n(),o(5,"td"),r(6),n()()),e&2){let t=c.$implicit,i=c.index;s(2),_(i+1),s(2),_(t.categoryName),s(2),_(t.totalAmount)}}function Jt(e,c){if(e&1&&(o(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),r(4,"#"),n(),o(5,"th"),r(6,"Category"),n(),o(7,"th"),r(8,"Total"),n()()(),o(9,"tbody"),d(10,zt,7,3,"tr",3),n()()),e&2){let t=c.ngIf;s(10),l("ngForOf",t)}}var Rt=(()=>{class e{constructor(t){this.transactionService=t,this.categoryWiseDetails$=ht([this.transactionService.getAllRecords("TransactionLog","transactionId"),this.transactionService.getAllRecords("Category","categoryId")]).pipe(O(([i,a])=>{let m=[];return a.forEach(g=>{let B=i.filter(u=>u.categoryId===g.categoryId).reduceRight((u,$t)=>u+$t.amount,0);m.push({categoryId:g.categoryId,categoryName:g.name,totalAmount:B})}),m}))}ngOnInit(){this.transactionService.getAllRecords("TransactionLog","transactionId")}static{this.\u0275fac=function(i){return new(i||e)(p(S))}}static{this.\u0275cmp=h({type:e,selectors:[["app-view-categorywise-transaction-history"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["class","table table-hover table-bordered table-striped shadow-sm",4,"ngIf"],[1,"table","table-hover","table-bordered","table-striped","shadow-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"]],template:function(i,a){i&1&&(d(0,Jt,11,1,"table",0),C(1,"async")),i&2&&l("ngIf",T(1,1,a.categoryWiseDetails$))},dependencies:[b,x,v,E]})}}return e})();function Kt(e,c){if(e&1&&(w(0),r(1),N()),e&2){let t=R().$implicit;s(),_(t.amount)}}function Qt(e,c){if(e&1&&(w(0),r(1),N()),e&2){let t=R().$implicit;s(),_(t.amount)}}function Zt(e,c){if(e&1){let t=W();o(0,"tr"),w(1),o(2,"td"),r(3),n(),o(4,"td"),r(5),C(6,"date"),n(),o(7,"td"),r(8),n(),o(9,"td"),r(10),n(),o(11,"td"),d(12,Kt,2,1,"ng-container",6),n(),o(13,"td"),d(14,Qt,2,1,"ng-container",6),n(),o(15,"td")(16,"div",7)(17,"button",8),r(18,"Edit"),n(),o(19,"button",9),A("click",function(){let a=Y(t).$implicit,m=R(2);return G(m.deleteRecord(a.transactionId))}),r(20,"Delete"),n()()(),N(),n()}if(e&2){let t=c.$implicit,i=c.index;H("table-success",t.transactionType)("table-danger",!t.transactionType),s(3),_(i+1),s(2),f(" ",bt(6,12,t.formattedDate,"dd/MM/yyyy")," "),s(3),f(" ",t.cause," "),s(2),f(" ",t.categoryName," "),s(2),l("ngIf",t.transactionType),s(2),l("ngIf",!t.transactionType),s(3),U("routerLink","../edit-transaction/",t.transactionId,"")}}function te(e,c){if(e&1&&(o(0,"table",3)(1,"thead",4)(2,"tr")(3,"th"),r(4,"#"),n(),o(5,"th"),r(6,"Date"),n(),o(7,"th"),r(8,"Details"),n(),o(9,"th"),r(10,"Category"),n(),o(11,"th"),r(12,"Credit"),n(),o(13,"th"),r(14,"Debit"),n(),o(15,"th"),r(16,"Action"),n()()(),o(17,"tbody"),d(18,Zt,21,15,"tr",5),n()()),e&2){let t=c.ngIf;s(18),l("ngForOf",t)}}var Mt=(()=>{class e{constructor(t){this.transactionService=t,this.collectionName="TransactionLog",this.collectionId="transactionId"}ngOnInit(){this.allTransactions$=this.transactionService.getAllRecords(this.collectionName,this.collectionId).pipe(O(t=>t.map(i=>$(L({},i),{formattedDate:this.transactionService.formatDate(i.date)}))))}deleteRecord(t){this.transactionService.deleteRecord(this.collectionName,t)}static{this.\u0275fac=function(i){return new(i||e)(p(S))}}static{this.\u0275cmp=h({type:e,selectors:[["app-list-transaction"]],standalone:!0,features:[y],decls:5,vars:3,consts:[[1,"d-flex","justify-content-end","mb-3"],["routerLink","../add-transaction",1,"btn","btn-primary"],["class","table table-bordered shadow-sm",4,"ngIf"],[1,"table","table-bordered","shadow-sm"],[1,"table-dark"],[3,"table-success","table-danger",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex"],[1,"btn","btn-sm","btn-primary","me-3",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"button",1),r(2,"Add Transaction"),n()(),d(3,te,19,1,"table",2),C(4,"async")),i&2&&(s(3),l("ngIf",T(4,1,a.allTransactions$)))},dependencies:[b,x,v,E,F,M,Q]})}}return e})();function ee(e,c){if(e&1){let t=W();o(0,"tr"),w(1),o(2,"td"),r(3),n(),o(4,"td"),r(5),n(),o(6,"td"),r(7),n(),o(8,"td")(9,"div",6)(10,"button",7),r(11,"Edit"),n(),o(12,"button",8),A("click",function(){let a=Y(t).$implicit,m=R(2);return G(m.deleteRecord(a.categoryId))}),r(13,"Delete"),n()()(),N(),n()}if(e&2){let t=c.$implicit,i=c.index;s(3),_(i+1),s(2),f(" ",t.name," "),s(2),f(" ",t.description," "),s(3),U("routerLink","../edit-category/",t.categoryId,"")}}function ie(e,c){if(e&1&&(o(0,"table",3)(1,"thead",4)(2,"tr")(3,"th"),r(4,"#"),n(),o(5,"th"),r(6,"Category name"),n(),o(7,"th"),r(8,"description"),n(),o(9,"th"),r(10,"Action"),n()()(),o(11,"tbody"),d(12,ee,14,5,"tr",5),n()()),e&2){let t=c.ngIf;s(12),l("ngForOf",t)}}var kt=(()=>{class e{constructor(t,i){this.transactionService=t,this.datePipe=i,this.collectionName="Category",this.collectionId="categoryId"}ngOnInit(){this.allCategory$=this.transactionService.getAllRecords(this.collectionName,this.collectionId)}deleteRecord(t){this.transactionService.deleteRecord(this.collectionName,t)}static{this.\u0275fac=function(i){return new(i||e)(p(S),p(F))}}static{this.\u0275cmp=h({type:e,selectors:[["app-list-category"]],standalone:!0,features:[X([F]),y],decls:5,vars:3,consts:[[1,"d-flex","justify-content-end","mb-3"],["routerLink","../add-category",1,"btn","btn-primary"],["class","table table-bordered shadow-sm",4,"ngIf"],[1,"table","table-bordered","shadow-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"btn","btn-sm","btn-primary","me-3",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"button",1),r(2,"Add Category"),n()(),d(3,ie,13,1,"table",2),C(4,"async")),i&2&&(s(3),l("ngIf",T(4,1,a.allCategory$)))},dependencies:[b,x,v,E,M,Q]})}}return e})();function ne(e,c){if(e&1&&(o(0,"tr"),w(1),o(2,"td"),r(3),n(),o(4,"td"),r(5),n(),o(6,"td"),r(7),n(),o(8,"td"),r(9),n(),o(10,"td"),r(11),n(),N(),n()),e&2){let t=c.$implicit;s(3),vt("",t.month,"/",t.year,""),s(2),f(" ",t.creditTotal," "),s(2),f(" ",t.debitTotal," "),s(),H("table-success",t.netTotal>0)("table-danger",t.netTotal<=0),s(),f(" ",t.netTotal," "),s(2),f(" ",t.investmentTotal," ")}}function oe(e,c){if(e&1&&(o(0,"table",5)(1,"thead",6)(2,"tr")(3,"th"),r(4,"Month/Year"),n(),o(5,"th"),r(6,"Creditted"),n(),o(7,"th"),r(8,"Debitted"),n(),o(9,"th"),r(10,"Saving"),n(),o(11,"th"),r(12,"Investment"),n()()(),o(13,"tbody"),d(14,ne,12,10,"tr",7),n()()),e&2){let t=R();s(14),l("ngForOf",t.monthlySummary)}}var Lt=(()=>{class e{constructor(t){this.transactionService=t,this.collectionName="TransactionLog",this.collectionId="transactionId",this.monthlySummary=[],this.subscriptions=[]}ngOnInit(){this.allTransactions$=this.transactionService.getAllRecords(this.collectionName,this.collectionId).pipe(O(t=>t.map(i=>$(L({},i),{formattedDate:this.transactionService.formatDate(i.date)})))),this.monthwiseSaving()}deleteRecord(t){this.transactionService.deleteRecord(this.collectionName,t)}monthwiseSaving(){this.subscriptions.push(this.allTransactions$.subscribe(t=>{let i={};t.forEach(a=>{let m=null,g=a.formattedDate;typeof g=="string"?m=new Date(g):g instanceof Date&&(m=g);let mt=m?.getFullYear(),B=m?.getMonth(),u=`${mt}-${B}`;i[u]||(i[u]={year:mt,month:B,debitTotal:0,creditTotal:0,netTotal:0,investmentTotal:0}),a.transactionType?i[u].creditTotal+=a.amount:i[u].debitTotal+=a.amount,i[u].investmentTotal+=i[u].investmentTotal,i[u].netTotal=i[u].creditTotal-i[u].debitTotal}),this.monthlySummary=Object.values(i)}))}ngOnDestroy(){this.subscriptions.length>0&&this.subscriptions.forEach(t=>t.unsubscribe())}static{this.\u0275fac=function(i){return new(i||e)(p(S))}}static{this.\u0275cmp=h({type:e,selectors:[["app-monthlywise-saving"]],standalone:!0,features:[X([F]),y],decls:6,vars:3,consts:[[1,"row","justify-content-center"],[1,"col-md-4"],[1,"card","shadow-sm"],[1,"card-body"],["class","table table-bordered shadow-sm",4,"ngIf"],[1,"table","table-bordered","shadow-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),I(3,"div",3),n()()(),d(4,oe,15,1,"table",4),C(5,"async")),i&2&&(s(4),l("ngIf",T(5,1,a.allTransactions$)))},dependencies:[b,x,v,E]})}}return e})();var je=[{path:"add-transaction",component:gt},{path:"edit-transaction/:id",component:gt},{path:"add-category",component:ut},{path:"edit-category/:id",component:ut},{path:"transaction-list",component:Mt},{path:"category-list",component:kt},{path:"categorywise-transaction-history",component:Rt},{path:"monthly-saving",component:Lt}];export{je as EXPENSEMANAGER_ROUTES};
