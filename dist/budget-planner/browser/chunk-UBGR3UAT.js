import{c as X,e as gt,f as z,h as A}from"./chunk-UR7WC2ZI.js";import{a as J,b as R,c as K,d as Q,e as Y,f as yt,g as ht,h as Z,i as tt,j as vt,k as bt,l as Ct,m as k,n as et,o as it}from"./chunk-Q6LKEO6D.js";import{c as _t,d as nt,f as It,g as St,h as st,i as Tt,j as ot,k as Et,m as xt}from"./chunk-I5EFJXWV.js";import{k as U,l as E,m as y,n as x,o as F,q as h}from"./chunk-MJTXES5D.js";import{$a as D,Ca as s,Da as d,Ra as m,Ta as c,Ua as ut,V as pt,Ya as o,Za as i,_ as ft,_a as _,a as O,ab as w,b as j,bb as G,d as C,da as f,eb as I,fb as M,gb as H,kb as a,lb as u,ma as q,mb as b,na as B,nb as W,ob as g,pb as L,qb as S,rb as T,w as P,x as mt}from"./chunk-UNPINHNG.js";var v=(()=>{class e{constructor(t){this.firestore=t}getAllRecords(t,n){let r=st(this.firestore,t);return It(r,{idField:n})}deleteRecord(t,n){let r=ot(this.firestore,`${t}/${n}`);return Tt(r)}updateRecord(t,n,r){return C(this,null,function*(){let p=ot(this.firestore,`${t}/${n}`);yield xt(p,r)})}addRecord(t){return C(this,null,function*(){let n=st(this.firestore,"TransactionLog");yield St(n,t)})}getRecordById(t,n){return C(this,null,function*(){let r=ot(this.firestore,`${t}/${n}`);return yield Et(r)})}static{this.\u0275fac=function(n){return new(n||e)(ft(nt))}}static{this.\u0275prov=pt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Lt=e=>({"is-invalid":e});function Vt(e,l){e&1&&(o(0,"div",8),a(1," Category name is required. "),i())}function $t(e,l){e&1&&(o(0,"div",8),a(1," Minimum 2 characters required. "),i())}var lt=(()=>{class e{constructor(t,n,r){this.fb=t,this.transactionService=n,this.activatedRoute=r,this.recordId=null}ngOnInit(){this.recordId=this.activatedRoute.snapshot.paramMap.get("id"),this.formInit(),this.recordId&&this.loadRecord(this.recordId)}loadRecord(t){return C(this,null,function*(){let n=yield this.transactionService.getRecordById("Category",t);n.exists()&&this.categoryForm.patchValue(n.data())})}formInit(){this.categoryForm=this.fb.group({name:this.fb.control("",{nonNullable:!0,validators:[R.required,R.minLength(2)]}),description:this.fb.control("",{nonNullable:!0})})}get f(){return this.categoryForm.controls}onSubmit(){if(this.categoryForm.valid){let t=this.categoryForm.getRawValue();this.recordId?this.transactionService.updateRecord("Category",this.recordId,t):this.transactionService.addRecord(t),this.categoryForm.reset(),this.categoryForm.markAsPristine()}else this.categoryForm.markAllAsTouched()}static{this.\u0275fac=function(n){return new(n||e)(d(k),d(v),d(X))}}static{this.\u0275cmp=f({type:e,selectors:[["app-add-category"]],standalone:!0,features:[g],decls:13,vars:7,consts:[[1,"p-3","border","rounded","bg-light","shadow-sm",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name","placeholder","Enter category name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","rows","2","formControlName","description","placeholder","Enter description",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"invalid-feedback"]],template:function(n,r){n&1&&(o(0,"form",0),I("ngSubmit",function(){return r.onSubmit()}),o(1,"div",1)(2,"label",2),a(3,"Category Name"),i(),_(4,"input",3),m(5,Vt,2,0,"div",4)(6,$t,2,0,"div",4),i(),o(7,"div",1)(8,"label",5),a(9,"Description (optional)"),i(),_(10,"textarea",6),i(),o(11,"button",7),a(12," Add/Update Category "),i()()),n&2&&(c("formGroup",r.categoryForm),s(4),c("ngClass",L(5,Lt,r.f.name.touched&&r.f.name.invalid)),s(),c("ngIf",r.f.name.errors==null?null:r.f.name.errors.required),s(),c("ngIf",r.f.name.errors==null?null:r.f.name.errors.minlength),s(5),c("disabled",r.categoryForm.invalid))},dependencies:[h,U,y,et,Y,J,K,Q,it,Z,tt,A]})}}return e})();var At=e=>({"is-invalid":e});function Ot(e,l){e&1&&(o(0,"div",17),a(1," Cause is required. "),i())}function jt(e,l){e&1&&(o(0,"div",17),a(1," Minimum 3 characters required. "),i())}function Pt(e,l){e&1&&(o(0,"div",17),a(1," Amount is required. "),i())}function qt(e,l){e&1&&(o(0,"div",17),a(1," Must be greater than 0. "),i())}function Bt(e,l){if(e&1&&(o(0,"option",21),a(1),i()),e&2){let t=l.$implicit;c("value",t.categoryId),s(),b(" ",t.name," ")}}function Gt(e,l){if(e&1&&(o(0,"select",18)(1,"option",19),a(2,"Select Category"),i(),m(3,Bt,2,2,"option",20),i()),e&2){let t=l.ngIf;s(3),c("ngForOf",t)}}function Ht(e,l){e&1&&(o(0,"div",17),a(1," Category is required. "),i())}var dt=(()=>{class e{constructor(t,n,r,p,N){this.activatedRoute=t,this.router=n,this.fb=r,this.firestore=p,this.transactionService=N,this.transactionId=null}ngOnInit(){this.transactionId=this.activatedRoute.snapshot.paramMap.get("id"),this.formInit(),this.categories$=this.transactionService.getAllRecords("Category","categoryId"),this.transactionId&&this.loadTransaction(this.transactionId)}loadTransaction(t){return C(this,null,function*(){let n=yield this.transactionService.getRecordById("TransactionLog",t);n.exists()&&this.transactionForm.patchValue(n.data())})}formInit(){this.transactionForm=this.fb.group({cause:this.fb.control("",{nonNullable:!0,validators:[R.required]}),amount:this.fb.control(0,{nonNullable:!0,validators:[R.required]}),categoryId:this.fb.control("",{nonNullable:!0,validators:[R.required]}),transactionType:this.fb.control(!1,{nonNullable:!0})})}onSubmit(){if(this.transactionForm.valid){let t=this.transactionForm.getRawValue();this.categories$.subscribe(n=>{let r=n.find(N=>N.categoryId===t.categoryId),p=j(O({},t),{categoryName:r?r.name:"",date:new Date});this.transactionId?this.transactionService.updateRecord("TransactionLog",this.transactionId,p):this.transactionService.addRecord(p),this.transactionForm.reset(),this.transactionForm.markAsPristine()})}else this.transactionForm.markAllAsTouched()}get form(){return this.transactionForm.controls}static{this.\u0275fac=function(n){return new(n||e)(d(X),d(gt),d(k),d(nt),d(v))}}static{this.\u0275cmp=f({type:e,selectors:[["app-add-transaction"]],standalone:!0,features:[g],decls:30,vars:18,consts:[[1,"p-3","border","rounded","shadow-sm","bg-light",3,"ngSubmit","formGroup"],[1,"mb-3","d-flex"],[1,"form-check","me-3"],["type","radio","formControlName","transactionType","name","transactionType","id","transactionType1",1,"form-check-input",3,"value"],["for","transactionType1",1,"form-check-label"],[1,"form-check"],["type","radio","formControlName","transactionType","name","transactionType","id","transactionType2","checked","",1,"form-check-input",3,"value"],["for","transactionType2",1,"form-check-label"],[1,"mb-3"],["for","cause",1,"form-label"],["id","cause","type","text","formControlName","cause","placeholder","Enter Transaction Details",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","amount",1,"form-label"],["id","amount","type","number","formControlName","amount","placeholder","Enter amount",1,"form-control",3,"ngClass"],["for","categoryId",1,"form-label"],["id","categoryId","class","form-select","formControlName","categoryId",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],["id","categoryId","formControlName","categoryId",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,r){n&1&&(o(0,"form",0),I("ngSubmit",function(){return r.onSubmit()}),o(1,"div",1)(2,"div",2),_(3,"input",3),o(4,"label",4),a(5," Credit "),i()(),o(6,"div",5),_(7,"input",6),o(8,"label",7),a(9," Debit "),i()()(),o(10,"div",8)(11,"label",9),a(12,"Transaction Details"),i(),_(13,"input",10),m(14,Ot,2,0,"div",11)(15,jt,2,0,"div",11),i(),o(16,"div",8)(17,"label",12),a(18,"Amount"),i(),_(19,"input",13),m(20,Pt,2,0,"div",11)(21,qt,2,0,"div",11),i(),o(22,"div",8)(23,"label",14),a(24,"Category"),i(),m(25,Gt,4,1,"select",15),S(26,"async"),m(27,Ht,2,0,"div",11),i(),o(28,"button",16),a(29," Submit "),i()()),n&2&&(c("formGroup",r.transactionForm),s(3),c("value",!0),s(4),c("value",!1),s(6),c("ngClass",L(14,At,r.form.cause.touched&&r.form.cause.invalid)),s(),c("ngIf",r.form.cause.errors==null?null:r.form.cause.errors.required),s(),c("ngIf",r.form.cause.errors==null?null:r.form.cause.errors.minlength),s(4),c("ngClass",L(16,At,r.form.amount.touched&&r.form.amount.invalid)),s(),c("ngIf",r.form.amount.errors==null?null:r.form.amount.errors.required),s(),c("ngIf",r.form.amount.errors==null?null:r.form.amount.errors.min),s(4),c("ngIf",T(26,12,r.categories$)),s(2),c("ngIf",r.form.categoryId.errors==null?null:r.form.categoryId.errors.required),s(),c("disabled",r.transactionForm.invalid))},dependencies:[h,U,E,y,x,et,Y,bt,Ct,J,yt,vt,ht,K,Q,it,Z,tt,A]})}}return e})();function Wt(e,l){if(e&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),a(6),i()()),e&2){let t=l.$implicit,n=l.index;s(2),u(n+1),s(2),u(t.categoryName),s(2),u(t.totalAmount)}}function Ut(e,l){if(e&1&&(o(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),a(4,"#"),i(),o(5,"th"),a(6,"Category"),i(),o(7,"th"),a(8,"Total"),i()()(),o(9,"tbody"),m(10,Wt,7,3,"tr",3),i()()),e&2){let t=l.ngIf;s(10),c("ngForOf",t)}}var Nt=(()=>{class e{constructor(t){this.transactionService=t,this.categoryWiseDetails$=mt([this.transactionService.getAllRecords("TransactionLog","transactionId"),this.transactionService.getAllRecords("Category","categoryId")]).pipe(P(([n,r])=>{let p=[];return r.forEach(N=>{let wt=n.filter(at=>at.categoryId===N.categoryId).reduceRight((at,Mt)=>at+Mt.amount,0);p.push({categoryId:N.categoryId,categoryName:N.name,totalAmount:wt})}),p}))}ngOnInit(){this.transactionService.getAllRecords("TransactionLog","transactionId")}static{this.\u0275fac=function(n){return new(n||e)(d(v))}}static{this.\u0275cmp=f({type:e,selectors:[["app-view-categorywise-transaction-history"]],standalone:!0,features:[g],decls:2,vars:3,consts:[["class","table table-hover table-bordered table-striped shadow-sm",4,"ngIf"],[1,"table","table-hover","table-bordered","table-striped","shadow-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(m(0,Ut,11,1,"table",0),S(1,"async")),n&2&&c("ngIf",T(1,1,r.categoryWiseDetails$))},dependencies:[h,E,y,x]})}}return e})();function Xt(e,l){if(e&1&&(D(0),a(1),w()),e&2){let t=M().$implicit;s(),u(t.amount)}}function zt(e,l){if(e&1&&(D(0),a(1),w()),e&2){let t=M().$implicit;s(),u(t.amount)}}function Jt(e,l){if(e&1){let t=G();o(0,"tr"),D(1),o(2,"td"),a(3),i(),o(4,"td"),a(5),i(),o(6,"td"),a(7),i(),o(8,"td"),a(9),i(),o(10,"td"),m(11,Xt,2,1,"ng-container",6),i(),o(12,"td"),m(13,zt,2,1,"ng-container",6),i(),o(14,"td")(15,"div",7)(16,"button",8),a(17,"Edit"),i(),o(18,"button",9),I("click",function(){let r=q(t).$implicit,p=M(2);return B(p.deleteRecord(r.transactionId))}),a(19,"Delete"),i()()(),w(),i()}if(e&2){let t=l.$implicit,n=l.index;ut("table-success",t.transactionType)("table-danger",!t.transactionType),s(3),u(n+1),s(2),b(" ",t.formattedDate," "),s(2),b(" ",t.cause," "),s(2),b(" ",t.categoryName," "),s(2),c("ngIf",t.transactionType),s(2),c("ngIf",!t.transactionType),s(3),H("routerLink","../edit-transaction/",t.transactionId,"")}}function Kt(e,l){if(e&1&&(o(0,"table",3)(1,"thead",4)(2,"tr")(3,"th"),a(4,"#"),i(),o(5,"th"),a(6,"Date"),i(),o(7,"th"),a(8,"Details"),i(),o(9,"th"),a(10,"Category"),i(),o(11,"th"),a(12,"Credit"),i(),o(13,"th"),a(14,"Debit"),i(),o(15,"th"),a(16,"Action"),i()()(),o(17,"tbody"),m(18,Jt,20,12,"tr",5),i()()),e&2){let t=l.ngIf;s(18),c("ngForOf",t)}}var Rt=(()=>{class e{constructor(t,n,r){this.fb=t,this.transactionService=n,this.datePipe=r,this.collectionName="TransactionLog",this.collectionId="transactionId"}ngOnInit(){this.allTransactions$=this.transactionService.getAllRecords(this.collectionName,this.collectionId).pipe(P(t=>t.map(n=>j(O({},n),{formattedDate:this.formatDate(n.date)}))))}formatDate(t){return t instanceof _t?(console.log(this.datePipe.transform(t.toDate(),"dd/MM/yyyy")),this.datePipe.transform(t.toDate(),"dd/MM/yyyy")):t instanceof Date?(console.log(t),this.datePipe.transform(t,"dd/MM/yyyy")):null}deleteRecord(t){this.transactionService.deleteRecord(this.collectionName,t)}static{this.\u0275fac=function(n){return new(n||e)(d(k),d(v),d(F))}}static{this.\u0275cmp=f({type:e,selectors:[["app-list-transaction"]],standalone:!0,features:[W([F]),g],decls:5,vars:3,consts:[[1,"d-flex","justify-content-end","mb-3"],["routerLink","../add-transaction",1,"btn","btn-primary"],["class","table table-bordered shadow-sm",4,"ngIf"],[1,"table","table-bordered","shadow-sm"],[1,"table-dark"],[3,"table-success","table-danger",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex"],[1,"btn","btn-sm","btn-primary","me-3",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"button",1),a(2,"Add Transaction"),i()(),m(3,Kt,19,1,"table",2),S(4,"async")),n&2&&(s(3),c("ngIf",T(4,1,r.allTransactions$)))},dependencies:[h,E,y,x,A,z]})}}return e})();function Qt(e,l){if(e&1){let t=G();o(0,"tr"),D(1),o(2,"td"),a(3),i(),o(4,"td"),a(5),i(),o(6,"td"),a(7),i(),o(8,"td")(9,"div",6)(10,"button",7),a(11,"Edit"),i(),o(12,"button",8),I("click",function(){let r=q(t).$implicit,p=M(2);return B(p.deleteRecord(r.categoryId))}),a(13,"Delete"),i()()(),w(),i()}if(e&2){let t=l.$implicit,n=l.index;s(3),u(n+1),s(2),b(" ",t.name," "),s(2),b(" ",t.description," "),s(3),H("routerLink","../edit-category/",t.categoryId,"")}}function Yt(e,l){if(e&1&&(o(0,"table",3)(1,"thead",4)(2,"tr")(3,"th"),a(4,"#"),i(),o(5,"th"),a(6,"Category name"),i(),o(7,"th"),a(8,"description"),i(),o(9,"th"),a(10,"Action"),i()()(),o(11,"tbody"),m(12,Qt,14,5,"tr",5),i()()),e&2){let t=l.ngIf;s(12),c("ngForOf",t)}}var Dt=(()=>{class e{constructor(t,n){this.transactionService=t,this.datePipe=n,this.collectionName="Category",this.collectionId="categoryId"}ngOnInit(){this.allCategory$=this.transactionService.getAllRecords(this.collectionName,this.collectionId)}deleteRecord(t){this.transactionService.deleteRecord(this.collectionName,t)}static{this.\u0275fac=function(n){return new(n||e)(d(v),d(F))}}static{this.\u0275cmp=f({type:e,selectors:[["app-list-category"]],standalone:!0,features:[W([F]),g],decls:5,vars:3,consts:[[1,"d-flex","justify-content-end","mb-3"],["routerLink","../add-category",1,"btn","btn-primary"],["class","table table-bordered shadow-sm",4,"ngIf"],[1,"table","table-bordered","shadow-sm"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"btn","btn-sm","btn-primary","me-3",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"button",1),a(2,"Add Category"),i()(),m(3,Yt,13,1,"table",2),S(4,"async")),n&2&&(s(3),c("ngIf",T(4,1,r.allCategory$)))},dependencies:[h,E,y,x,A,z]})}}return e})();var Ne=[{path:"add-transaction",component:dt},{path:"edit-transaction/:id",component:dt},{path:"add-category",component:lt},{path:"edit-category/:id",component:lt},{path:"transaction-list",component:Rt},{path:"category-list",component:Dt},{path:"categorywise-transaction-history",component:Nt}];export{Ne as EXPENSEMANAGER_ROUTES};
